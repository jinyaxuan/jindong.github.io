<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="博客">
    <meta name="keyword" content="null">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-person-128.png">
    <link rel="alternate" type="application/atom+xml" title="Jindong" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        robot maze｜Jindong&#39;s blog
        
    </title>

    <link rel="canonical" href="http://jinyaxuan.github.io/2019/02/17/robot-maze/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
</head>

<style>

    header.intro-header {
        background-image: url('/home/wangjindong/Desktop/jindong.github.io/themes/hexo-theme-snippet/source/img/avatar.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost="true" data-istags="false
" data-ishome="false">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    Jindong
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
							
                        <li>
                            <a href="/Tags/">Tags</a>
                        </li>
							
						
                    
					
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img" src>


<style>
    
    header.intro-header {
        background-image: url('')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>robot maze</h1>
                    
                    <span class="meta">
                         作者 Jindong Wang
                        <span>
                          日期 2019-02-17
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                        <a class="tag" href="/tags/#Reinforcement learning" title="Reinforcement learning">Reinforcement learning</a>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            robot maze
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <h1 id="Section-0-问题描述与完成项目流程"><a href="#Section-0-问题描述与完成项目流程" class="headerlink" title="Section 0 问题描述与完成项目流程"></a>Section 0 问题描述与完成项目流程</h1><h2 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1. 问题描述"></a>1. 问题描述</h2><p><img src="/2019/02/17/robot-maze/default.png" width="20%"></p>
<p>在该项目中，你将使用强化学习算法，实现一个自动走迷宫机器人。</p>
<ol>
<li>如上图所示，智能机器人显示在右上角。在我们的迷宫中，有陷阱（红色炸弹）及终点（蓝色的目标点）两种情景。机器人要尽量避开陷阱、尽快到达目的地。</li>
<li>小车可执行的动作包括：向上走 <code>u</code>、向右走 <code>r</code>、向下走 <code>d</code>、向左走 <code>l</code>。</li>
<li>执行不同的动作后，根据不同的情况会获得不同的奖励，具体而言，有以下几种情况。<ul>
<li>撞到墙壁：-10</li>
<li>走到终点：50</li>
<li>走到陷阱：-30</li>
<li>其余情况：-0.1</li>
</ul>
</li>
<li>我们需要通过修改 <code>robot.py</code> 中的代码，来实现一个 Q Learning 机器人，实现上述的目标。</li>
</ol>
<h2 id="2-完成项目流程"><a href="#2-完成项目流程" class="headerlink" title="2. 完成项目流程"></a>2. 完成项目流程</h2><ol>
<li>配置环境，使用 <code>envirnment.yml</code> 文件配置名为 <code>robot-env</code> 的 conda 环境，具体而言，你只需转到当前的目录，在命令行/终端中运行如下代码，稍作等待即可。<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">conda env create -f envirnment.yml</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>安装完毕后，在命令行/终端中运行 <code>source activate robot-env</code>（Mac/Linux 系统）或 <code>activate robot-env</code>（Windows 系统）激活该环境。</p>
<ol>
<li>阅读 <code>main.ipynb</code> 中的指导完成项目，并根据指导修改对应的代码，生成、观察结果。</li>
<li>导出代码与报告，上传文件，提交审阅并优化。</li>
</ol>
<hr>
<hr>
<h1 id="Section-1-算法理解"><a href="#Section-1-算法理解" class="headerlink" title="Section 1 算法理解"></a>Section 1 算法理解</h1><h2 id="1-1-强化学习总览"><a href="#1-1-强化学习总览" class="headerlink" title="1. 1 强化学习总览"></a>1. 1 强化学习总览</h2><p>强化学习作为机器学习算法的一种，其模式也是让智能体在“训练”中学到“经验”，以实现给定的任务。但不同于监督学习与非监督学习，在强化学习的框架中，我们更侧重通过智能体与环境的<strong>交互</strong>来学习。通常在监督学习和非监督学习任务中，智能体往往需要通过给定的训练集，辅之以既定的训练目标（如最小化损失函数），通过给定的学习算法来实现这一目标。然而在强化学习中，智能体则是通过其与环境交互得到的奖励进行学习。这个环境可以是虚拟的（如虚拟的迷宫），也可以是真实的（自动驾驶汽车在真实道路上收集数据）。</p>
<p>在强化学习中有五个核心组成部分，它们分别是：<strong>环境（Environment）</strong>、<strong>智能体（Agent）</strong>、<strong>状态（State）</strong>、<strong>动作（Action）</strong>和<strong>奖励（Reward）</strong>。在某一时间节点 $t$：</p>
<ul>
<li>智能体在从环境中感知其所处的状态 $s_t$</li>
<li>智能体根据某些准则选择动作 $a_t$</li>
<li>环境根据智能体选择的动作，向智能体反馈奖励 $r_{t+1}$</li>
</ul>
<p>通过合理的学习算法，智能体将在这样的问题设置下，成功学到一个在状态 $s_t$ 选择动作 $a_t$ 的策略 $\pi (s_t) = a_t$。</p>
<hr>
<p><strong>问题 1</strong>：请参照如上的定义，描述出 “机器人走迷宫这个问题” 中强化学习五个组成部分对应的实际对象：</p>
<ul>
<li><strong>环境</strong> : 某一时间点<script type="math/tex">t</script></li>
<li><strong>状态</strong> : 从环境中获取其所出状态<script type="math/tex">s_{t}</script></li>
</ul>
<ul>
<li><strong>动作</strong> : 依据某些准则选择动作<script type="math/tex">a_{t}</script></li>
<li><strong>奖励</strong> : 依据智能体选择的动作反馈奖励<script type="math/tex">r_{t+1}</script></li>
</ul>
<script type="math/tex; mode=display">T(s^{'}, a, s) = P(s^{'}|a,s)</script><hr>
<h2 id="1-2-计算-Q-值"><a href="#1-2-计算-Q-值" class="headerlink" title="1.2 计算 Q 值"></a>1.2 计算 Q 值</h2><p>在我们的项目中，我们要实现基于 Q-Learning 的强化学习算法。Q-Learning 是一个值迭代（Value Iteration）算法。与策略迭代（Policy Iteration）算法不同，值迭代算法会计算每个”状态“或是”状态-动作“的值（Value）或是效用（Utility），然后在执行动作的时候，会设法最大化这个值。因此，对每个状态值的准确估计，是我们值迭代算法的核心。通常我们会考虑<strong>最大化动作的长期奖励</strong>，即不仅考虑当前动作带来的奖励，还会考虑动作长远的奖励。</p>
<p>在 Q-Learning 算法中，我们把这个长期奖励记为 Q 值，我们会考虑每个 ”状态-动作“ 的 Q 值，具体而言，它的计算公式为：</p>
<script type="math/tex; mode=display">
q(s_{t},a) = R_{t+1} + \gamma \times\max_a q(a,s_{t+1})</script><p>也就是对于当前的“状态-动作” $(s<em>{t},a)$，我们考虑执行动作 $a$ 后环境给我们的奖励 $R</em>{t+1}$，以及执行动作 $a$ 到达 $s<em>{t+1}$后，执行任意动作能够获得的最大的Q值 $\max_a q(a,s</em>{t+1})$，$\gamma$ 为折扣因子。</p>
<p>不过一般地，我们使用更为保守地更新 Q 表的方法，即引入松弛变量 $alpha$，按如下的公式进行更新，使得 Q 表的迭代变化更为平缓。</p>
<script type="math/tex; mode=display">
q(s_{t},a) = (1-\alpha) \times q(s_{t},a) + \alpha \times(R_{t+1} + \gamma \times\max_a q(a,s_{t+1}))</script><hr>
<p><img src="/2019/02/17/robot-maze/default2.png" width="20%"></p>
<p><strong>问题 2</strong>：根据已知条件求 $q(s_{t},a)$，在如下模板代码中的空格填入对应的数字即可。</p>
<p>已知：如上图，机器人位于 $s_1$，行动为 <code>u</code>，行动获得的奖励与题目的默认设置相同。在 $s_2$ 中执行各动作的 Q 值为：<code>u</code>: -24，<code>r</code>: -13，<code>d</code>: -0.29、<code>l</code>: +40，$\gamma$ 取0.9。</p>
<script type="math/tex; mode=display">
\begin{align}
q(s_{t},a) & = R_{t+1} + \gamma \times\max_a q(a,s_{t+1}) \\
 & =(-0.1) + (0.9)*(40) \\
 & =(35.9)
\end{align}</script><hr>
<h2 id="1-3-如何选择动作"><a href="#1-3-如何选择动作" class="headerlink" title="1.3 如何选择动作"></a>1.3 如何选择动作</h2><p>在强化学习中，「探索-利用」问题是非常重要的问题。具体来说，根据上面的定义，我们会尽可能地让机器人在每次选择最优的决策，来最大化长期奖励。但是这样做有如下的弊端：</p>
<ol>
<li>在初步的学习中，我们的 Q 值会不准确，如果在这个时候都按照 Q 值来选择，那么会造成错误。</li>
<li>学习一段时间后，机器人的路线会相对固定，则机器人无法对环境进行有效的探索。</li>
</ol>
<p>因此我们需要一种办法，来解决如上的问题，增加机器人的探索。由此我们考虑使用 epsilon-greedy 算法，即在小车选择动作的时候，以一部分的概率随机选择动作，以一部分的概率按照最优的 Q 值选择动作。同时，这个选择随机动作的概率应当随着训练的过程逐步减小。</p>
<hr>
<p><strong>问题 3</strong>：在如下的代码块中，实现 epsilon-greedy 算法的逻辑，并运行测试代码。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> operator</span><br><span class="line"></span><br><span class="line">actions = [<span class="string">'u'</span>,<span class="string">'r'</span>,<span class="string">'d'</span>,<span class="string">'l'</span>]</span><br><span class="line">qline = &#123;<span class="string">'u'</span>:<span class="number">1.2</span>, <span class="string">'r'</span>:<span class="number">-2.1</span>, <span class="string">'d'</span>:<span class="number">-24.5</span>, <span class="string">'l'</span>:<span class="number">27</span>&#125;</span><br><span class="line">epsilon = <span class="number">0.3</span> <span class="comment"># 以0.3的概率进行随机选择</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">choose_action</span><span class="params">(epsilon)</span>:</span></span><br><span class="line">    </span><br><span class="line">    action = <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">if</span> random.uniform(<span class="number">0</span>,<span class="number">1.0</span>) &lt;= epsilon: <span class="comment"># 以某一概率</span></span><br><span class="line">        action = random.choice(actions) <span class="comment"># 实现对动作的随机选择</span></span><br><span class="line">    <span class="keyword">else</span>: </span><br><span class="line">        action = max(qline.items(), key=operator.itemgetter(<span class="number">1</span>))[<span class="number">0</span>] <span class="comment"># 否则选择具有最大 Q 值的动作</span></span><br><span class="line">    <span class="keyword">return</span> action</span><br><span class="line"></span><br><span class="line">result = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">    result += choose_action(epsilon)</span><br><span class="line"></span><br><span class="line">result</span><br></pre></td></tr></table></figure>
<pre><code>&#39;llldllllllldlllllllllrllllldllllluldllrrlllllllllllllllrlllldllllrlrllrlulllllulllrlldlllllrlllllllrlllllrllllllllllldlllludlu...&#39;
</code></pre><hr>
<hr>
<h1 id="Section-2-代码实现"><a href="#Section-2-代码实现" class="headerlink" title="Section 2 代码实现"></a>Section 2 代码实现</h1><h2 id="2-1-Maze-类理解"><a href="#2-1-Maze-类理解" class="headerlink" title="2.1. Maze 类理解"></a>2.1. <code>Maze</code> 类理解</h2><p>我们首先引入了迷宫类 <code>Maze</code>，这是一个非常强大的函数，它能够根据你的要求随机创建一个迷宫，或者根据指定的文件，读入一个迷宫地图信息。</p>
<ol>
<li>使用 <code>Maze(&quot;file_name&quot;)</code> 根据指定文件创建迷宫，或者使用 <code>Maze(maze_size=(height,width))</code> 来随机生成一个迷宫。</li>
<li>使用 <code>trap_number</code> 参数，在创建迷宫的时候，设定迷宫中陷阱的数量。</li>
<li>直接键入迷宫变量的名字按回车，展示迷宫图像（如 <code>g=Maze(&quot;xx.txt&quot;)</code>，那么直接输入 <code>g</code> 即可。</li>
<li>建议生成的迷宫尺寸，长在 6~12 之间，宽在 10～12 之间。</li>
</ol>
<hr>
<p><strong>问题 4</strong>：在如下的代码块中，创建你的迷宫并展示。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Maze <span class="keyword">import</span> Maze</span><br><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">'retina'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## todo: 创建迷宫并展示</span></span><br><span class="line">g = Maze(<span class="string">'test_world/maze_01.txt'</span>)</span><br><span class="line"></span><br><span class="line">g</span><br></pre></td></tr></table></figure>
<p><img src="/2019/02/17/robot-maze/output_13_0.png" alt="png"></p>
<pre><code>Maze of size (12, 12)
</code></pre><hr>
<p>你可能已经注意到，在迷宫中我们已经默认放置了一个机器人。实际上，我们为迷宫配置了相应的 API，来帮助机器人的移动与感知。其中你随后会使用的两个 API 为 <code>maze.sense_robot()</code> 及 <code>maze.move_robot()</code>。</p>
<ol>
<li><code>maze.sense_robot()</code> 为一个无参数的函数，输出机器人在迷宫中目前的位置。</li>
<li><code>maze.move_robot(direction)</code> 对输入的移动方向，移动机器人，并返回对应动作的奖励值。</li>
</ol>
<hr>
<p><strong>问题 5</strong>：随机移动机器人，并记录下获得的奖励，展示出机器人最后的位置。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rewards = []</span><br><span class="line"></span><br><span class="line"><span class="comment">## 循环、随机移动机器人10次，记录下奖励</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    result = g.move_robot(random.choice(actions))</span><br><span class="line">    </span><br><span class="line">    rewards.append(result)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 输出机器人最后的位置</span></span><br><span class="line">print(g.sense_robot)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 打印迷宫，观察机器人位置</span></span><br><span class="line">g</span><br></pre></td></tr></table></figure>
<p><img src="/2019/02/17/robot-maze/output_15_0.png" alt="png"></p>
<pre><code>&lt;bound method Maze.sense_robot of Maze of size (12, 12)&gt;
</code></pre><p><img src="/2019/02/17/robot-maze/output_15_2.png" alt="png"></p>
<pre><code>Maze of size (12, 12)
</code></pre><h2 id="2-2-Robot-类实现"><a href="#2-2-Robot-类实现" class="headerlink" title="2.2. Robot 类实现"></a>2.2. <code>Robot</code> 类实现</h2><p><code>Robot</code> 类是我们需要重点实现的部分。在这个类中，我们需要实现诸多功能，以使得我们成功实现一个强化学习智能体。总体来说，之前我们是人为地在环境中移动了机器人，但是现在通过实现 <code>Robot</code> 这个类，机器人将会自己移动。通过实现学习函数，<code>Robot</code> 类将会学习到如何选择最优的动作，并且更新强化学习中对应的参数。</p>
<p>首先 <code>Robot</code> 有多个输入，其中 <code>alpha=0.5, gamma=0.9, epsilon0=0.5</code> 表征强化学习相关的各个参数的默认值，这些在之前你已经了解到，<code>Maze</code> 应为机器人所在迷宫对象。</p>
<p>随后观察 <code>Robot.update</code> 函数，它指明了在每次执行动作时，<code>Robot</code> 需要执行的程序。按照这些程序，各个函数的功能也就明了了。</p>
<p>最后你需要实现 <code>Robot.py</code> 代码中的8段代码，他们都在代码中以 <code>#TODO</code> 进行标注，你能轻松地找到他们。</p>
<hr>
<p><strong>问题 6</strong>：实现 <code>Robot.py</code> 中的8段代码，并运行如下代码检查效果（记得将 <code>maze</code> 变量修改为你创建迷宫的变量名）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Robot <span class="keyword">import</span> Robot</span><br><span class="line">robot = Robot(g) <span class="comment"># 记得将 maze 变量修改为你创建迷宫的变量名</span></span><br><span class="line">robot.set_status(learning=<span class="keyword">True</span>,testing=<span class="keyword">False</span>)</span><br><span class="line">print(robot.update())</span><br><span class="line"></span><br><span class="line">g</span><br></pre></td></tr></table></figure>
<pre><code>(&#39;u&#39;, -0.1)
</code></pre><p><img src="/2019/02/17/robot-maze/output_19_1.png" alt="png"></p>
<pre><code>Maze of size (12, 12)
</code></pre><hr>
<h2 id="2-3-用-Runner-类训练-Robot"><a href="#2-3-用-Runner-类训练-Robot" class="headerlink" title="2.3 用 Runner 类训练 Robot"></a>2.3 用 <code>Runner</code> 类训练 Robot</h2><p>在实现了上述内容之后，我们就可以开始对我们 <code>Robot</code> 进行训练并调参了。我们为你准备了又一个非常棒的类 <code>Runner</code>，来实现整个训练过程及可视化。使用如下的代码，你可以成功对机器人进行训练。并且你会在当前文件夹中生成一个名为 <code>filename</code> 的视频，记录了整个训练的过程。通过观察该视频，你能够发现训练过程中的问题，并且优化你的代码及参数。</p>
<hr>
<p><strong>问题 7</strong>：尝试利用下列代码训练机器人，并进行调参。可选的参数包括：</p>
<ul>
<li>训练参数<ul>
<li>训练次数 <code>epoch</code></li>
</ul>
</li>
<li>机器人参数：<ul>
<li><code>epsilon0</code> (epsilon 初值)</li>
<li><code>epsilon</code>衰减（可以是线性、指数衰减，可以调整衰减的速度），你需要在 Robot.py 中调整</li>
<li><code>alpha</code></li>
<li><code>gamma</code></li>
</ul>
</li>
<li>迷宫参数:<ul>
<li>迷宫大小</li>
<li>迷宫中陷阱的数量</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 可选的参数：</span></span><br><span class="line">epoch = <span class="number">30</span></span><br><span class="line"></span><br><span class="line">epsilon0 = <span class="number">0.6</span></span><br><span class="line">alpha = <span class="number">0.5</span></span><br><span class="line">gamma = <span class="number">0.9</span></span><br><span class="line"></span><br><span class="line">maze_size = (<span class="number">6</span>,<span class="number">8</span>)</span><br><span class="line">trap_number = <span class="number">2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Runner <span class="keyword">import</span> Runner</span><br><span class="line"></span><br><span class="line">g = Maze(maze_size=maze_size,trap_number=trap_number)</span><br><span class="line">r = Robot(g,alpha=alpha, epsilon0=epsilon0, gamma=gamma)</span><br><span class="line">r.set_status(learning=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">runner = Runner(r, g)</span><br><span class="line">runner.run_training(epoch, display_direction=<span class="keyword">True</span>)</span><br><span class="line">runner.generate_movie(filename = <span class="string">"final1.mp4"</span>) <span class="comment"># 你可以注释该行代码，加快运行速度，不过你就无法观察到视频了。</span></span><br></pre></td></tr></table></figure>
<pre><code>Generate Movies: 100%|██████████| 892/892 [00:10&lt;00:00, 87.02it/s]
</code></pre><hr>
<p>使用 <code>runner.plot_results()</code> 函数，能够打印机器人在训练过程中的一些参数信息。</p>
<ul>
<li>Success Times 代表机器人在训练过程中成功的累计次数，这应当是一个累积递增的图像。</li>
<li>Accumulated Rewards 代表机器人在每次训练 epoch 中，获得的累积奖励的值，这应当是一个逐步递增的图像。</li>
<li>Running Times per Epoch 代表在每次训练 epoch 中，小车训练的次数（到达终点就会停止该 epoch 转入下次训练），这应当是一个逐步递减的图像。</li>
</ul>
<hr>
<p><strong>问题 8</strong>：使用 <code>runner.plot_results()</code> 输出训练结果，根据该结果对你的机器人进行分析。</p>
<ul>
<li>指出你选用的参数如何，选用参数的原因。</li>
<li>建议你比较不同参数下机器人的训练的情况。</li>
<li>训练的结果是否满意，有何改进的计划。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">runner.plot_results()</span><br></pre></td></tr></table></figure>
<p><img src="/2019/02/17/robot-maze/output_25_0.png" alt="png"></p>

                <hr>
                

                <ul class="pager">
                    
                    
                    <li class="next">
                        <a href="/2019/02/16/Explore-Movie-Dataset/" data-toggle="tooltip" data-placement="top" title="Explore Movie Dataset">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                


                <!--加入新的评论系统-->
                

                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Section-0-问题描述与完成项目流程"><span class="toc-text">Section 0 问题描述与完成项目流程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-问题描述"><span class="toc-text">1. 问题描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-完成项目流程"><span class="toc-text">2. 完成项目流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Section-1-算法理解"><span class="toc-text">Section 1 算法理解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-强化学习总览"><span class="toc-text">1. 1 强化学习总览</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-计算-Q-值"><span class="toc-text">1.2 计算 Q 值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-如何选择动作"><span class="toc-text">1.3 如何选择动作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Section-2-代码实现"><span class="toc-text">Section 2 代码实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Maze-类理解"><span class="toc-text">2.1. Maze 类理解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Robot-类实现"><span class="toc-text">2.2. Robot 类实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-用-Runner-类训练-Robot"><span class="toc-text">2.3 用 Runner 类训练 Robot</span></a></li></ol></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5 class="text-center">
                        <a href="/tags/">FEATURED TAGS</a>
                    </h5>
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#Reinforcement learning" title="Reinforcement learning">Reinforcement learning</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>







<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/jindong_wang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank" href="https://github.com/jinyaxuan">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Jindong 2019
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <br>
                    Theme by <a href="https://haojen.github.io/">Haojen Ma</a>
                </p>

            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/blog.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://jinyaxuan.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- mathjax -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
        processEscapes: true
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    }});
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','null','2.0.0');
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="null">
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>

</html>
